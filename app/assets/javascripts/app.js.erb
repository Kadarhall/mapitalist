var map;
function initialize() {
  // Create a simple map.
  map = new google.maps.Map(document.getElementById('map-canvas'), {
    zoom: 2,
    center: {lat: 0, lng: 0}
  });

  // Load country boundaries from GeoJSON
  map.data.loadGeoJson('/maps/countries.json');

  map.data.setStyle(function(feature) {
    return ({
      fillColor: feature.getProperty("color"),
      strokeColor: "black",
      strokeWeight: 1
    });
  });

  // Global infowindow
  var infowindow = new google.maps.InfoWindow();

  // When the user clicks, open an infowindow
  map.data.addListener('click', function(event) {
    var name = event.feature.getProperty("name");
    $('#country-name').html(name);
  });  

  map.data.addListener('mouseover', function(event) {
    map.data.revertStyle();
    map.data.overrideStyle(event.feature, {fillColor: "red", strokeWeight: 2});
  });

  map.data.addListener('mouseout', function(event) {
    map.data.revertStyle();
  });
}

function updateStyle(){
  map.data.setStyle(function(feature) {
    return ({
      fillColor: '#'+Math.floor(Math.random()*16777215).toString(16),
      strokeColor: "black",
      strokeWeight: 1
    });
  });
}

google.maps.event.addDomListener(window, 'load', initialize);

// var intervalID = window.setInterval(updateStyle, 3000);