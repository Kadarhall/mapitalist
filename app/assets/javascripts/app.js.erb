var map;
function initialize() {
  // Create a simple map.
  map = new google.maps.Map(document.getElementById('map-canvas'), {
    zoom: 2,
    center: {lat: 0, lng: 0}
  });

  // Load country boundaries from GeoJSON
  map.data.loadGeoJson('/maps/countries.json');

  map.data.setStyle(function(feature) {
    return ({
      fillColor: feature.getProperty("color"),
      strokeColor: "black",
      strokeWeight: 1
    });
  });

  // Global infowindow
  var infowindow = new google.maps.InfoWindow();

  // When the user clicks, open an infowindow
  map.data.addListener('click', function(event) {
    var myHTML = event.feature.getProperty("name");
    console.log(myHTML);
    // infowindow.setContent("<div style='width:150px; text-align: center;'>"+myHTML+"</div>");
    // infowindow.setPosition(event.feature.getGeometry().get());
    // infowindow.setOptions({pixelOffset: new google.maps.Size(0,-30)});
    // infowindow.open(map);
  });  
}

function updateStyle(){
  map.data.setStyle(function(feature) {
    return ({
      fillColor: '#'+Math.floor(Math.random()*16777215).toString(16),
      strokeColor: "black",
      strokeWeight: 1
    });
  });
}

google.maps.event.addDomListener(window, 'load', initialize);

var intervalID = window.setInterval(updateStyle, 3000);